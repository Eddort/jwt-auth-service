version: '2'
services:
  jwt-auth:
    build:
      context: ./
      dockerfile: Dockerfile
    ports:
      - "8089:8089"
    depends_on:
      - mongo
    environment:
      MONGODB_USER: "admin"
      MONGODB_DATABASE: "auth"
      MONGODB_PASS: "123"
      MONGO_PORT: "27017"
      SERVICE_PORT: "8089"
      FAIL_REDIRECT_URL: http://localhost:8089/login
      SUCESS_REDIRECT_URL: http://localhost:3332
  mongo:
    command: mongod
    image: mongo:latest
    ports:
      - "27100:27017"
    environment:
      - MONGO_INITDB_ROOT_USERNAME=admin
      - MONGO_INITDB_ROOT_PASSWORD=123
      - MONGO_INITDB_DATABASE=auth
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    logging:
      driver: none